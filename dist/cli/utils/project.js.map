{"version":3,"file":"project.js","sources":["../../../src/cli/utils/project.js"],"sourcesContent":["import fs from 'fs-extra';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\n\n// Get the __dirname equivalent in ES modules\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\n// Templates directory path (relative to this file)\nconst templatesDir = path.resolve(__dirname, '../../../templates');\n\n/**\n * Creates a new project by copying template files and customizing them\n * @param {string} projectDir - Target project directory path\n * @param {string} templateName - Template name to use\n */\nexport async function createProject(projectDir, templateName = 'minimal') {\n  // Validate template exists\n  const templateDir = path.join(templatesDir, templateName);\n  if (!await fs.pathExists(templateDir)) {\n    throw new Error(`Template '${templateName}' not found`);\n  }\n  \n  // Check if target directory already exists\n  if (await fs.pathExists(projectDir)) {\n    // Check if directory is empty\n    const files = await fs.readdir(projectDir);\n    if (files.length > 0) {\n      throw new Error(`Directory '${projectDir}' already exists and is not empty`);\n    }\n  } else {\n    // Create the project directory\n    await fs.mkdir(projectDir, { recursive: true });\n  }\n  \n  // Copy template files to target directory\n  await fs.copy(templateDir, projectDir);\n  \n  // Customize the project (replace placeholders, etc.)\n  await customizeProject(projectDir, path.basename(projectDir));\n  \n  return projectDir;\n}\n\n/**\n * Customizes project files by replacing placeholders\n * @param {string} projectDir - Project directory path\n * @param {string} projectName - Name of the project\n */\nasync function customizeProject(projectDir, projectName) {\n  // Modify package.json\n  const packageJsonPath = path.join(projectDir, 'package.json');\n  if (await fs.pathExists(packageJsonPath)) {\n    const packageJson = await fs.readJson(packageJsonPath);\n    \n    // Update project name\n    packageJson.name = projectName;\n    \n    // Write back the modified package.json\n    await fs.writeJson(packageJsonPath, packageJson, { spaces: 2 });\n  }\n  \n  // Additional customization could go here (e.g., update README.md, etc.)\n}"],"names":["__filename","fileURLToPath","import","meta","url","__dirname","path","dirname","templatesDir","resolve","createProject","projectDir","templateName","templateDir","join","fs","pathExists","Error","files","readdir","length","mkdir","recursive","copy","customizeProject","basename","projectName","packageJsonPath","packageJson","readJson","name","writeJson","spaces"],"mappings":";;;;AAIA;AACA,MAAMA,UAAU,GAAGC,aAAa,CAACC,MAAM,CAACC,IAAI,CAACC,GAAG,CAAC;AACjD,MAAMC,SAAS,GAAGC,IAAI,CAACC,OAAO,CAACP,UAAU,CAAC;;AAE1C;AACA,MAAMQ,YAAY,GAAGF,IAAI,CAACG,OAAO,CAACJ,SAAS,EAAE,oBAAoB,CAAC;;AAElE;AACA;AACA;AACA;AACA;AACO,eAAeK,aAAaA,CAACC,UAAU,EAAEC,YAAY,GAAG,SAAS,EAAE;AACxE;EACA,MAAMC,WAAW,GAAGP,IAAI,CAACQ,IAAI,CAACN,YAAY,EAAEI,YAAY,CAAC;EACzD,IAAI,EAAC,MAAMG,EAAE,CAACC,UAAU,CAACH,WAAW,CAAC,CAAE,EAAA;AACrC,IAAA,MAAM,IAAII,KAAK,CAAC,CAAaL,UAAAA,EAAAA,YAAY,aAAa,CAAC;AACzD;;AAEA;AACA,EAAA,IAAI,MAAMG,EAAE,CAACC,UAAU,CAACL,UAAU,CAAC,EAAE;AACnC;IACA,MAAMO,KAAK,GAAG,MAAMH,EAAE,CAACI,OAAO,CAACR,UAAU,CAAC;AAC1C,IAAA,IAAIO,KAAK,CAACE,MAAM,GAAG,CAAC,EAAE;AACpB,MAAA,MAAM,IAAIH,KAAK,CAAC,CAAcN,WAAAA,EAAAA,UAAU,mCAAmC,CAAC;AAC9E;AACF,GAAC,MAAM;AACL;AACA,IAAA,MAAMI,EAAE,CAACM,KAAK,CAACV,UAAU,EAAE;AAAEW,MAAAA,SAAS,EAAE;AAAK,KAAC,CAAC;AACjD;;AAEA;AACA,EAAA,MAAMP,EAAE,CAACQ,IAAI,CAACV,WAAW,EAAEF,UAAU,CAAC;;AAEtC;EACA,MAAMa,gBAAgB,CAACb,UAAU,EAAEL,IAAI,CAACmB,QAAQ,CAACd,UAAU,CAAC,CAAC;AAE7D,EAAA,OAAOA,UAAU;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAea,gBAAgBA,CAACb,UAAU,EAAEe,WAAW,EAAE;AACvD;EACA,MAAMC,eAAe,GAAGrB,IAAI,CAACQ,IAAI,CAACH,UAAU,EAAE,cAAc,CAAC;AAC7D,EAAA,IAAI,MAAMI,EAAE,CAACC,UAAU,CAACW,eAAe,CAAC,EAAE;IACxC,MAAMC,WAAW,GAAG,MAAMb,EAAE,CAACc,QAAQ,CAACF,eAAe,CAAC;;AAEtD;IACAC,WAAW,CAACE,IAAI,GAAGJ,WAAW;;AAE9B;AACA,IAAA,MAAMX,EAAE,CAACgB,SAAS,CAACJ,eAAe,EAAEC,WAAW,EAAE;AAAEI,MAAAA,MAAM,EAAE;AAAE,KAAC,CAAC;AACjE;;AAEA;AACF;;;;"}