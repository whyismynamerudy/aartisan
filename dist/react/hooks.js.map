{"version":3,"file":"hooks.js","sources":["../../src/react/hooks.js"],"sourcesContent":["import { useRef, useEffect, useState, useCallback, useId } from 'react';\nimport { useAartisanContext } from './provider.jsx';\nimport { createMetadata } from '../core/metadata.js';\n\n/**\n * Hook to enhance a component for AI understanding\n * @param {string} name - Component name\n * @param {Object} semantics - Semantic metadata\n * @returns {Object} - Ref and props to apply to the component\n */\nexport function useAIEnhanced(name, semantics = {}) {\n  const elementRef = useRef(null);\n  const componentId = useId();\n  const { registerComponent, unregisterComponent, debug } = useAartisanContext();\n  \n  // Create metadata\n  const metadata = createMetadata({\n    name,\n    purpose: semantics.purpose,\n    interactions: semantics.interactions,\n    semantics\n  });\n  \n  // Register component when mounted\n  useEffect(() => {\n    if (elementRef.current) {\n      registerComponent(componentId, metadata);\n      \n      return () => {\n        unregisterComponent(componentId);\n      };\n    }\n  }, [componentId, registerComponent, unregisterComponent]);\n  \n  // Data attributes for the component\n  const aiProps = {\n    'data-aartisan': true,\n    'data-aartisan-id': componentId,\n    'data-aartisan-name': name,\n    'data-aartisan-purpose': semantics.purpose || ''\n  };\n  \n  return { ref: elementRef, aiProps };\n}\n\n/**\n * Hook to access and update AI context\n * @param {Object} initialContext - Initial context data\n * @returns {Object} Context and update function\n */\nexport function useAIContext(initialContext = {}) {\n  const { semanticContext, updateSemanticContext } = useAartisanContext();\n  \n  // Initialize context if provided\n  useEffect(() => {\n    if (Object.keys(initialContext).length > 0) {\n      updateSemanticContext(initialContext);\n    }\n  }, []);\n  \n  return {\n    context: semanticContext,\n    updateContext: updateSemanticContext\n  };\n}\n\n/**\n * Hook to define and handle AI interactions\n * @param {Object} interactions - Map of interaction handlers\n * @returns {Object} Interaction handlers\n */\nexport function useAIInteraction(interactions = {}) {\n  const { debug } = useAartisanContext();\n  const [activeInteraction, setActiveInteraction] = useState(null);\n  \n  // Wrap handlers to include metadata\n  const enhancedInteractions = Object.entries(interactions).reduce(\n    (acc, [name, handler]) => {\n      acc[name] = (...args) => {\n        if (debug) {\n          console.log(`[Aartisan] Interaction: ${name}`, args);\n        }\n        \n        setActiveInteraction(name);\n        const result = handler(...args);\n        setActiveInteraction(null);\n        \n        return result;\n      };\n      return acc;\n    },\n    {}\n  );\n  \n  return {\n    interactions: enhancedInteractions,\n    activeInteraction,\n    isInteracting: activeInteraction !== null\n  };\n}"],"names":["useAIEnhanced","name","semantics","elementRef","useRef","componentId","useId","registerComponent","unregisterComponent","debug","useAartisanContext","metadata","createMetadata","purpose","interactions","useEffect","current","aiProps","ref","useAIContext","initialContext","semanticContext","updateSemanticContext","Object","keys","length","context","updateContext","useAIInteraction","activeInteraction","setActiveInteraction","useState","enhancedInteractions","entries","reduce","acc","handler","args","console","log","result","isInteracting"],"mappings":";;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACO,SAASA,aAAaA,CAACC,IAAI,EAAEC,SAAS,GAAG,EAAE,EAAE;AAClD,EAAA,MAAMC,UAAU,GAAGC,MAAM,CAAC,IAAI,CAAC;AAC/B,EAAA,MAAMC,WAAW,GAAGC,KAAK,EAAE;EAC3B,MAAM;IAAEC,iBAAiB;IAAEC,mBAAmB;AAAEC,IAAAA;GAAO,GAAGC,kBAAkB,EAAE;;AAE9E;EACA,MAAMC,QAAQ,GAAGC,cAAc,CAAC;IAC9BX,IAAI;IACJY,OAAO,EAAEX,SAAS,CAACW,OAAO;IAC1BC,YAAY,EAAEZ,SAAS,CAACY,YAAY;AACpCZ,IAAAA;AACF,GAAC,CAAC;;AAEF;AACAa,EAAAA,SAAS,CAAC,MAAM;IACd,IAAIZ,UAAU,CAACa,OAAO,EAAE;AACtBT,MAAAA,iBAAiB,CAACF,WAAW,EAAEM,QAAQ,CAAC;AAExC,MAAA,OAAO,MAAM;QACXH,mBAAmB,CAACH,WAAW,CAAC;OACjC;AACH;GACD,EAAE,CAACA,WAAW,EAAEE,iBAAiB,EAAEC,mBAAmB,CAAC,CAAC;;AAEzD;AACA,EAAA,MAAMS,OAAO,GAAG;AACd,IAAA,eAAe,EAAE,IAAI;AACrB,IAAA,kBAAkB,EAAEZ,WAAW;AAC/B,IAAA,oBAAoB,EAAEJ,IAAI;AAC1B,IAAA,uBAAuB,EAAEC,SAAS,CAACW,OAAO,IAAI;GAC/C;EAED,OAAO;AAAEK,IAAAA,GAAG,EAAEf,UAAU;AAAEc,IAAAA;GAAS;AACrC;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASE,YAAYA,CAACC,cAAc,GAAG,EAAE,EAAE;EAChD,MAAM;IAAEC,eAAe;AAAEC,IAAAA;GAAuB,GAAGZ,kBAAkB,EAAE;;AAEvE;AACAK,EAAAA,SAAS,CAAC,MAAM;IACd,IAAIQ,MAAM,CAACC,IAAI,CAACJ,cAAc,CAAC,CAACK,MAAM,GAAG,CAAC,EAAE;MAC1CH,qBAAqB,CAACF,cAAc,CAAC;AACvC;GACD,EAAE,EAAE,CAAC;EAEN,OAAO;AACLM,IAAAA,OAAO,EAAEL,eAAe;AACxBM,IAAAA,aAAa,EAAEL;GAChB;AACH;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASM,gBAAgBA,CAACd,YAAY,GAAG,EAAE,EAAE;EAClD,MAAM;AAAEL,IAAAA;GAAO,GAAGC,kBAAkB,EAAE;EACtC,MAAM,CAACmB,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGC,QAAQ,CAAC,IAAI,CAAC;;AAEhE;AACA,EAAA,MAAMC,oBAAoB,GAAGT,MAAM,CAACU,OAAO,CAACnB,YAAY,CAAC,CAACoB,MAAM,CAC9D,CAACC,GAAG,EAAE,CAAClC,IAAI,EAAEmC,OAAO,CAAC,KAAK;AACxBD,IAAAA,GAAG,CAAClC,IAAI,CAAC,GAAG,CAAC,GAAGoC,IAAI,KAAK;AACvB,MAAA,IAAI5B,KAAK,EAAE;QACT6B,OAAO,CAACC,GAAG,CAAC,CAAA,wBAAA,EAA2BtC,IAAI,CAAE,CAAA,EAAEoC,IAAI,CAAC;AACtD;MAEAP,oBAAoB,CAAC7B,IAAI,CAAC;AAC1B,MAAA,MAAMuC,MAAM,GAAGJ,OAAO,CAAC,GAAGC,IAAI,CAAC;MAC/BP,oBAAoB,CAAC,IAAI,CAAC;AAE1B,MAAA,OAAOU,MAAM;KACd;AACD,IAAA,OAAOL,GAAG;GACX,EACD,EACF,CAAC;EAED,OAAO;AACLrB,IAAAA,YAAY,EAAEkB,oBAAoB;IAClCH,iBAAiB;IACjBY,aAAa,EAAEZ,iBAAiB,KAAK;GACtC;AACH;;;;"}